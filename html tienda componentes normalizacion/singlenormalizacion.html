<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NTC-ISO 12966-4:2015 - Tienda ICONTEC</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-blue: #0073aa;
            --primary-green: #1ec773;
            --primary-blue-light: rgba(0, 115, 170, 0.1);
            --primary-green-light: rgba(30, 199, 115, 0.1);
            --text-dark: #333;
            --text-light: #666;
            --white: #ffffff;
            --gray-light: #f8f9fa;
            --gray-medium: #e9ecef;
            --shadow: rgba(0, 0, 0, 0.1);
            --shadow-hover: rgba(0, 0, 0, 0.15);
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-quick: all 0.2s ease-out;
            --border-radius: 12px;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Catamaran', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 0;
            background: var(--gray-light);
            color: var(--text-dark);
            line-height: 1.6;
        }



    

        /* Contenedor principal */
        .main-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 20px;
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 25px var(--shadow);
            overflow: hidden;
        }



        /* Layout del producto */
        .product-layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 3rem;
            padding: 2rem;
        }

        /* Información del producto */
        .product-info {
            animation: slideInLeft 0.6s ease-out;
        }

        .reference-code {
            display: inline-block;
            background: linear-gradient(45deg, var(--primary-blue), var(--primary-green));
            color: var(--white);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            animation: pulse 2s infinite;
        }

        .product-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 1rem;
            line-height: 1.3;
        }

        .product-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 2rem;
            font-style: italic;
        }

        /* Estado del producto */
        .product-status {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1rem;
            background: var(--primary-green-light);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-green);
        }

        .status-badge {
            background: var(--primary-green);
            color: var(--white);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .preview-btn {
            background: linear-gradient(45deg, var(--primary-blue), var(--primary-green));
            color: var(--white);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition-smooth);
            margin-top: 1rem;
        }

        .preview-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px var(--shadow-hover);
            color: var(--white);
        }

        /* Descripción expandible */
        .description-panel {
            margin: 2rem 0;
        }

        .description-toggle {
            background: var(--primary-blue-light);
            border: none;
            padding: 1rem;
            width: 100%;
            text-align: left;
            border-radius: var(--border-radius);
            font-weight: 600;
            color: var(--primary-blue);
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .description-toggle:hover {
            background: var(--primary-blue);
            color: var(--white);
        }

        .description-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: var(--white);
            border: 1px solid var(--gray-medium);
            border-top: none;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
        }

        .description-content.expanded {
            max-height: 300px;
            padding: 1.5rem;
        }

        /* Especificaciones técnicas */
        .technical-specs {
            background: var(--gray-light);
            padding: 2rem;
            border-radius: var(--border-radius);
            margin: 2rem 0;
        }

        .spec-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .spec-item {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: 0 2px 10px var(--shadow);
            transition: var(--transition-smooth);
        }

        .spec-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px var(--shadow-hover);
        }

        .spec-label {
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .spec-value {
            color: var(--text-dark);
        }

        .spec-value a {
            color: var(--primary-green);
            text-decoration: none;
            transition: var(--transition-quick);
        }

        .spec-value a:hover {
            color: var(--primary-blue);
            text-decoration: underline;
        }

        /* Panel de compra */
        .purchase-panel {
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 25px var(--shadow);
            padding: 2rem;
            position: sticky;
            top: 100px;
            animation: slideInRight 0.6s ease-out;
        }

        .purchase-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .format-selection {
            margin-bottom: 2rem;
        }

        .format-warning {
          background: linear-gradient(45deg, var(--primary-blue), var(--primary-green));            color: var(--white);
            padding: 1rem;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: 600;
            margin-bottom: 1.5rem;
            animation: shake 0.5s ease-in-out;
        }

        .format-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .format-option {
            border: 2px solid var(--gray-medium);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            cursor: pointer;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .format-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .format-option:hover::before {
            left: 100%;
        }

        .format-option:hover {
            border-color: var(--primary-blue);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px var(--shadow-hover);
        }

        .format-option.selected {
            border-color: var(--primary-green);
            background: var(--primary-green-light);
        }

        .format-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .format-type {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .format-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-blue-light);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
        }

        .format-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-green);
        }

        .format-price .original {
            text-decoration: line-through;
            color: var(--text-light);
            font-size: 0.9rem;
            margin-right: 0.5rem;
        }

        .subscription-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--gray-medium);
            border-radius: var(--border-radius);
            font-size: 0.9rem;
            background: var(--white);
            transition: var(--transition-quick);
        }

        .subscription-select:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px var(--primary-blue-light);
        }

        .combo-discount {
            background: linear-gradient(45deg, #dc3545, #fd7e14);
            color: var(--white);
            padding: 0.2rem 0.5rem;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Botón de agregar al carrito */
        .add-to-cart {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(45deg, var(--primary-blue), var(--primary-green));
            color: var(--white);
            border: none;
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
            margin: 1.5rem 0;
        }

        .add-to-cart::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .add-to-cart:hover::before {
            left: 100%;
        }

        .add-to-cart:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px var(--shadow-hover);
        }

        .add-to-cart:active {
            transform: translateY(0);
        }

        /* Información adicional */
        .additional-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-top: 1.5rem;
            font-size: 0.9rem;
        }

        .additional-info strong {
            color: #856404;
        }

        /* Animaciones */
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Responsive */
        @media (max-width: 768px) {
     

         

            .product-layout {
                grid-template-columns: 1fr;
                gap: 2rem;
                padding: 1rem;
            }

            .purchase-panel {
                position: static;
                order: -1;
            }

            .product-title {
                font-size: 1.5rem;
            }

            .spec-grid {
                grid-template-columns: 1fr;
            }

         
        }

        /* Estados de focus para accesibilidad */
        button:focus,
        select:focus,
        input:focus {
            outline: 2px solid var(--primary-green);
            outline-offset: 2px;
        }

        /* Scroll suave */
        html {
            scroll-behavior: smooth;
        }

        /* Loading states */
        .loading {
            opacity: 0.7;
            pointer-events: none;
            position: relative;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            border: 2px solid var(--gray-medium);
            border-top: 2px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            transform: translate(-50%, -50%);
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>
</head>

<body>


    <!-- Contenedor principal -->
    <div class="main-container">

        <!-- Layout del producto -->
        <div class="product-layout">
            <!-- Información del producto -->
            <div class="product-info">
                <div class="reference-code">
                    NTC-ISO 12966-4:2015
                </div>

                <h1 class="product-title">
                    Grasas y aceites animales y vegetales. Cromatografía de gases de ésteres metílicos de ácidos grasos. Parte 4: Determinación por cromatografía capilar de gases
                </h1>

                <h2 class="product-subtitle">
                    Animal and vegetable fats and oils. Gas chromatography of fatty acid methyl esters. Part 4: Determination by capillary gas chromatography
                </h2>

                <!-- Estado del producto -->
                <div class="product-status">
                    <div>
                        <span class="status-badge">Vigente</span>
                        <span>Está comprando una Norma Vigente</span>
                    </div>
                    <a href="#" class="preview-btn" onclick="openPreview()">
                        <i class="bi bi-eye"></i>
                        Vista Previa
                    </a>
                </div>

                <!-- Descripción expandible -->
                <div class="description-panel">
                    <button class="description-toggle" onclick="toggleDescription()">
                        <span>Descripción técnica</span>
                        <i class="bi bi-chevron-down" id="desc-icon"></i>
                    </button>
                    <div class="description-content" id="description-content">
                        Esta parte de la serie ISO 12966 especifica un método para la determinación de ésteres metílicos de ácidos grasos (FAME, por su sigla en inglés) derivados de la transesterificación o esterificación de grasas, aceites y ácidos grasos mediante cromatografía capilar de gases (GLC). Los ésteres metílicos de ácidos grasos de C8 a C24 se pueden separar con la ayuda de esta parte de la serie ISO 12966, incluidos los ésteres metílicos de ácidos grasos saturados, los ésteres metílicos de ácidos grasos monoinsaturados cis y trans, y los ésteres metílicos de ácidos grasos poliinsaturados cis y trans.
                    </div>
                </div>

                <!-- Especificaciones técnicas -->
                <div class="technical-specs">
                    <h3>Especificaciones Técnicas</h3>
                    <div class="spec-grid">
                        <div class="spec-item">
                            <div class="spec-label">
                                <i class="bi bi-people"></i>
                                Comité técnico
                            </div>
                            <div class="spec-value">
                                <a href="/comites/049-aceites-y-grasas">049 ACEITES Y GRASAS VEGETALES Y ANIMALES COMESTIBLES</a>
                            </div>
                        </div>
                        
                        <div class="spec-item">
                            <div class="spec-label">
                                <i class="bi bi-diagram-3"></i>
                                Macrosector
                            </div>
                            <div class="spec-value">
                                <a href="/macrosectores/agro-y-alimentos">AGRO Y ALIMENTOS</a>
                            </div>
                        </div>
                        
                        <div class="spec-item">
                            <div class="spec-label">
                                <i class="bi bi-list-ol"></i>
                                Clasificación ICS
                            </div>
                            <div class="spec-value">
                                <strong>67.200.10</strong> ACEITES Y GRASAS DE ORIGEN VEGETAL Y ANIMAL
                            </div>
                        </div>
                        
                        <div class="spec-item">
                            <div class="spec-label">
                                <i class="bi bi-bookmark"></i>
                                Edición
                            </div>
                            <div class="spec-value">1.0</div>
                        </div>
                        
                        <div class="spec-item">
                            <div class="spec-label">
                                <i class="bi bi-calendar"></i>
                                Fecha de Ratificación
                            </div>
                            <div class="spec-value">05/08/2025</div>
                        </div>
                        
                        <div class="spec-item">
                            <div class="spec-label">
                                <i class="bi bi-translate"></i>
                                Idioma
                            </div>
                            <div class="spec-value">Español</div>
                        </div>
                        
                        <div class="spec-item">
                            <div class="spec-label">
                                <i class="bi bi-file-text"></i>
                                Número de páginas
                            </div>
                            <div class="spec-value">23</div>
                        </div>
                        
                        <div class="spec-item">
                            <div class="spec-label">
                                <i class="bi bi-file-earmark-zip"></i>
                                Tamaño archivo eBook
                            </div>
                            <div class="spec-value">1.12 MB</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel de compra -->
            <div class="purchase-panel">
                <h3 class="purchase-title">Opciones de compra</h3>
                
                <div class="format-warning">
                    <strong>Debe seleccionar al menos un formato</strong>
                </div>

                <form id="purchase-form">
                    <div class="format-selection">
                        <div class="format-options">
                            <!-- Opción Impreso -->
                            <div class="format-option" onclick="selectFormat(this, 'print')">
                                <div class="format-header">
                                    <div class="format-type">
                                        <div class="format-icon">
                                            <i class="bi bi-book"></i>
                                        </div>
                                        <span>Impreso</span>
                                    </div>
                                    <div class="format-price">
                                        COP$329.500
                                    </div>
                                </div>
                            </div>

                            <!-- Opción eBook -->
                            <div class="format-option" onclick="selectFormat(this, 'ebook')">
                                <div class="format-header">
                                    <div class="format-type">
                                        <div class="format-icon">
                                            <i class="bi bi-tablet"></i>
                                        </div>
                                        <span>eBook</span>
                                    </div>
                                    <div class="format-price">
                                        COP$263.600
                                    </div>
                                </div>
                                <select class="subscription-select" id="subscription-select">
                                    <option value="unlimited">Ilimitado x COP$263.600</option>
                                    <option value="2days">2 días x COP$98.850</option>
                                    <option value="1month">1 mes x COP$131.800</option>
                                    <option value="6months">6 meses x COP$164.750</option>
                                    <option value="1year">1 año x COP$197.700</option>
                                    <option value="5years">5 años x COP$230.650</option>
                                </select>
                            </div>

                            <!-- Opción Combo -->
                            <div class="format-option" onclick="selectFormat(this, 'combo')">
                                <div class="format-header">
                                    <div class="format-type">
                                        <div class="format-icon">
                                            <i class="bi bi-collection"></i>
                                        </div>
                                        <span>Combo</span>
                                        <span class="combo-discount">(-20%)</span>
                                    </div>
                                    <div class="format-price">
                                        <span class="original">COP$593.100</span>
                                        COP$474.500
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="add-to-cart" id="add-to-cart-btn" disabled>
                        <i class="bi bi-bag-plus"></i>
                        Agregar al carrito
                    </button>
                </form>

                <div class="additional-info">
                    <strong>Importante:</strong> ✅Los eBooks comprados en la Tienda ICONTEC se acceden mediante una licencia de lectura a través del lector seguro iPC Reader. No se trata de un archivo descargable en formato PDF.
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        $(document).ready(function() {
            // Animaciones de entrada
            setTimeout(() => {
                $('.product-info').addClass('animate-in');
                $('.purchase-panel').addClass('animate-in');
            }, 100);

   
        });

        // Variables globales
        let selectedFormat = null;
        let selectedPrice = 0;

        // Función para alternar descripción
        function toggleDescription() {
            const content = document.getElementById('description-content');
            const icon = document.getElementById('desc-icon');
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                icon.style.transform = 'rotate(0deg)';
            } else {
                content.classList.add('expanded');
                icon.style.transform = 'rotate(180deg)';
            }
        }

        // Función para seleccionar formato
        function selectFormat(element, format) {
            // Remover selección anterior
            document.querySelectorAll('.format-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Agregar selección actual
            element.classList.add('selected');
            selectedFormat = format;
            
            // Obtener precio
            const priceElement = element.querySelector('.format-price');
            const priceText = priceElement.textContent;
            selectedPrice = extractPrice(priceText);
            
            // Habilitar botón de agregar al carrito
            const addButton = document.getElementById('add-to-cart-btn');
            addButton.disabled = false;
            addButton.classList.remove('loading');
            
            // Actualizar texto del botón
            updateCartButton();
            
            // Analytics
            gtag('event', 'select_format', {
                'event_category': 'Product',
                'event_label': format,
                'value': selectedPrice
            });
        }

        // Función para extraer precio del texto
        function extractPrice(priceText) {
            const match = priceText.match(/COP\$([0-9,]+)/);
            return match ? parseInt(match[1].replace(/,/g, '')) : 0;
        }

        // Función para actualizar botón del carrito
        function updateCartButton() {
            const button = document.getElementById('add-to-cart-btn');
            const formatNames = {
                'print': 'Impreso',
                'ebook': 'eBook',
                'combo': 'Combo'
            };
            
            button.innerHTML = `
                <i class="bi bi-bag-plus"></i>
                Agregar ${formatNames[selectedFormat]} - COP$${selectedPrice.toLocaleString()}
            `;
        }

        // Función para abrir vista previa
        function openPreview() {
            // Simular apertura de vista previa
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 2rem; border-radius: 12px; max-width: 500px; text-align: center;">
                    <h3>Vista Previa</h3>
                    <p>La vista previa se abrirá en una nueva ventana</p>
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="background: #0073aa; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer;">
                        Cerrar
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Analytics
            gtag('event', 'preview_product', {
                'event_category': 'Product',
                'event_label': 'NTC-ISO 12966-4:2015'
            });
        }

        // Manejo del formulario de compra
        document.getElementById('purchase-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!selectedFormat) {
                alert('Por favor selecciona un formato antes de agregar al carrito');
                return;
            }
            
            // Mostrar estado de carga
            const button = document.getElementById('add-to-cart-btn');
            button.classList.add('loading');
            button.disabled = true;
            
            // Simular agregado al carrito
            setTimeout(() => {
                // Mostrar confirmación
                showNotification('Producto agregado al carrito exitosamente', 'success');
                
                // Actualizar contador del carrito
                updateCartCounter();
                
                // Restaurar botón
                button.classList.remove('loading');
                button.disabled = false;
                
                // Analytics
                gtag('event', 'add_to_cart', {
                    'event_category': 'Ecommerce',
                    'event_label': selectedFormat,
                    'value': selectedPrice,
                    'currency': 'COP'
                });
                
            }, 1500);
        });

        // Función para mostrar notificaciones
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#1ec773' : '#0073aa'};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.2);
                z-index: 10000;
                animation: slideInRight 0.3s ease-out;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <i class="bi bi-check-circle"></i>
                    ${message}
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-in forwards';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Función para actualizar contador del carrito
        function updateCartCounter() {
            const cartLink = document.querySelector('.actions a[href="/carrito"]');
            if (cartLink) {
                const currentText = cartLink.textContent;
                const currentCount = parseInt(currentText.match(/\((\d+)\)/)?.[1] || 0);
                cartLink.innerHTML = `
                    <i class="bi bi-bag"></i>
                    Carrito (${currentCount + 1})
                `;
            }
        }

        // Manejo del selector de suscripción
        document.getElementById('subscription-select').addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
            const priceMatch = selectedOption.text.match(/COP\$([0-9,]+)/);
            
            if (priceMatch && selectedFormat === 'ebook') {
                selectedPrice = parseInt(priceMatch[1].replace(/,/g, ''));
                updateCartButton();
            }
        });

        // CSS adicional para las animaciones
        const additionalCSS = `
            <style>
                @keyframes slideInRight {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                
                @keyframes slideOutRight {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
                
        
                
                .animate-in {
                    animation: fadeInUp 0.6s ease-out forwards;
                }
                
                @keyframes fadeInUp {
                    from { opacity: 0; transform: translateY(30px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                
                /* Efectos adicionales de hover */
                .spec-item:hover .spec-label i {
                    color: var(--primary-green);
                    transform: scale(1.2);
                }
                
                .format-option:hover .format-icon {
                    background: var(--primary-blue);
                    color: var(--white);
                    transform: scale(1.1);
                }
                
                /* Mejoras de accesibilidad */
                @media (prefers-reduced-motion: reduce) {
                    *, *::before, *::after {
                        animation-duration: 0.01ms !important;
                        animation-iteration-count: 1 !important;
                        transition-duration: 0.01ms !important;
                        scroll-behavior: auto !important;
                    }
                }
                
                /* Estados de focus mejorados */
                .format-option:focus {
                    outline: 3px solid var(--primary-green);
                    outline-offset: 2px;
                }
                
                .add-to-cart:focus {
                    outline: 3px solid var(--white);
                    outline-offset: 2px;
                }
            </style>
        `;
        
        document.head.insertAdjacentHTML('beforeend', additionalCSS);

        // Inicialización de Google Analytics (opcional)
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
        
        // Event listeners para accesibilidad por teclado
        document.querySelectorAll('.format-option').forEach((option, index) => {
            option.setAttribute('tabindex', '0');
            option.setAttribute('role', 'button');
            option.setAttribute('aria-label', `Seleccionar formato ${option.querySelector('.format-type span').textContent}`);
            
            option.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    option.click();
                }
            });
        });
        
        // Mensaje de bienvenida animado
        setTimeout(() => {
            showNotification('¡Bienvenido! Explora nuestras opciones de formato', 'info');
        }, 1000);
    </script>
</body>
</html>